# المخطط الهندسي لتطبيق "فضفضة نساء" (Application Blueprint)

هذه الوثيقة هي المرجع الفني والمفاهيمي لتطبيق "فضفضة". توثق الرؤية، الميزات، والهيكل التقني للتطبيق.

---

## 1. نظرة عامة على التطبيق

- **الاسم:** Fadfada | فضفضة نساء
- **المفهوم الأساسي:** تطبيق دردشة آمن، خاص، ومجهول الهوية، مصمم خصيصاً للنساء في العالم العربي للتعبير عن أنفسهن بحرية مع شخصيات افتراضية مدعومة بالذكاء الاصطناعي.
- **الهدف الأساسي:** توفير دعم عاطفي فوري، مساحة للتأمل الذاتي، ومكافحة الشعور بالوحدة، كل ذلك مع الحفاظ على خصوصية المستخدمة الكاملة.

---

## 2. تدفق المستخدم والميزات الأساسية (User Flow & Features)

### أ. تدفق ما قبل المصادقة (Pre-Authentication Flow)
1.  **شاشة المصادقة (`AuthScreen`):** واجهة تسجيل دخول أو إنشاء حساب (وهمية حالياً).
2.  **الجولة التعريفية التفاعلية (`OnboardingScreen`):** (للمستخدمات الجدد فقط) محادثة قصيرة وموجهة مع شخصية "فاتن" لتعليم أساسيات التطبيق وبناء علاقة أولية.

### ب. تدفق ما بعد المصادقة (AI Chat Flow)
هذا هو المسار الأولي الذي يمر به المستخدم العائد.
1.  **شاشة الترحيب (`WelcomeScreen`):** بوابة دخول تفاعلية ومتحركة تقدم هوية التطبيق.
2.  **شاشة اختيار الشخصيات (`CharacterSelection`):** تعرض قائمة بالشخصيات المتاحة.
3.  **شاشة اختيار الحالة المزاجية (`MoodCheckinScreen`):** خطوة اختيارية لتكييف نبرة الحوار.
4.  **شاشة الدردشة (`ChatScreen`):** الواجهة الرئيسية للتفاعل مع الشخصية المختارة.

### ج. الميزات الأساسية للتطبيق (Main App Views)
بعد المصادقة، يمكن للمستخدمة التنقل بين هذه الواجهات عبر شريط التنقل السفلي.

1.  **الدردشة (`AIChatFlow`):**
    - قلب التطبيق حيث تجري المحادثات.
    - ردود فورية ومتدفقة (Streaming).
    - دعم إرسال الصور والإدخال الصوتي.
    - **بطاقات الاقتباسات القابلة للمشاركة:** ميزة لمشاركة أي رد من الذكاء الاصطناعي كبطاقة مصممة.

2.  **المجتمع (`CommunityHubScreen`):**
    - ميزة (وهمية حالياً) تهدف إلى بناء مجتمع داعم.

3.  **المفكرة (`JournalScreen`):**
    - مساحة خاصة للمستخدمة لتدوين أفكارها ومشاعرها.

4.  **الملف الشخصي (`ProfileScreen`):**
    - عرض معلومات المستخدم (وهمية).
    - **تحدي العناية بالذات اليومي:** عرض تحدٍ يومي جديد لتشجيع التفاعل.
    - **أفكاري الأسبوعية:** ميزة حصرية لتوليد ملخص عاطفي للنشاط الأسبوعي.
    - **المحادثات المحفوظة:** قائمة بجميع المحادثات المحفوظة.
    - **الإنجازات:** عرض الإنجازات التي تم فتحها والمتبقية.

5.  **الإعدادات (`SettingsScreen`):**
    - التحكم في مظهر التطبيق وإعدادات الوصول.

---

## 3. التحفيز والمشاركة (Gamification & Engagement)

- **نظام الإنجازات (`Achievements`):**
    - يتم فتح الإنجازات عند تحقيق معالم معينة (مثل كتابة أول تدوينة، إكمال 5 تحديات يومية).
- **سلسلة الزيارات اليومية (`Daily Streak`):**
    - يشجع التطبيق على العودة اليومية.
- **تحديات العناية بالذات اليومية:**
    - يقدم مهمة صغيرة كل يوم لتعزيز الصحة النفسية وبناء عادة استخدام التطبيق.
- **المؤثرات الصوتية:**
    - مؤثرات صوتية خفيفة لتعزيز التجربة التفاعلية.

---

## 4. الهيكل التقني (Technical Architecture)

- **الواجهة الأمامية (Frontend):** React, TypeScript, Tailwind CSS.
- **إدارة الحالة (State Management):** Zustand مع `immer` و `persist`.
- **تكامل الذكاء الاصطناعي (AI Integration):**
    - **الخدمة:** Google Gemini API (`@google/genai`).
    - **الاستخدامات:**
        - `generateContentStream`: للدردشة.
        - `generateContent`: لملخصات المحادثات، الرسائل الترحيبية، تحديات العناية بالذات، والملخصات الأسبوعية.
- **الأصول (Assets):** صور وأصوات `Base64` مضمنة.
- **تطبيق الويب التقدمي (PWA):** يتضمن `service-worker.js` لمعالجة إشعارات الدفع.

---

## 5. هيكل الملفات والمكونات الرئيسية

```
/
├── index.html
├── index.tsx
├── App.tsx
├── store.ts
├── constants.ts
├── types.ts
├── service-worker.js
├── services/
│   └── geminiService.ts
└── components/
    ├── AuthScreen.tsx
    ├── OnboardingScreen.tsx  # جديد
    ├── WelcomeScreen.tsx
    ├── CharacterSelection.tsx
    ├── MoodCheckinScreen.tsx
    ├── ChatScreen.tsx
    ├── ShareCardModal.tsx    # جديد
    ├── BottomNavBar.tsx
    ├── CommunityHubScreen.tsx
    ├── JournalScreen.tsx
    ├── ProfileScreen.tsx
    └── SettingsScreen.tsx
```